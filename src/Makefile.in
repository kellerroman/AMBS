include ../Makefile.in
EXECUTABLE = ../bin/AMBS
SOURCE_DIR = ../src

include $(SOURCE_DIR)/inc_Makefile_src
          
OBJECTS=$(_SOURCES:.F90=.o)

VPATH := $(SOURCE_DIR)

compile: $(EXECUTABLE)
	@true

$(EXECUTABLE): $(OBJECTS)
	$(FC) $(CFLAGS) $^ -o $@ $(LIBS) $(INCLUDE)

%.o: %.F90
	$(FC) -c $(CFLAGS) $(INCLUDE) $< -o $@ 
	
include $(SOURCE_DIR)/inc_Makefile_dep
	
.PHONY: clean compile

clean:
	@rm -vf $(EXECUTABLE) *.o *.mod $(SOURCE_DIR)/*~ $(SOURCE_DIR)/*.mod
	@rm -vrf ../*~

debug: CFLAGS += -DDEBUG 
debug: compile

dep:
	cd ../src; ../tools/bin/make_dependencies . 
